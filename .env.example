# Naga SIS Environment Configuration
# Copy this file to .env and fill in the appropriate values

# =================================
# GENERAL CONFIGURATION
# =================================
ENVIRONMENT=development
DEBUG=true
SECRET_KEY=your-secret-key-here
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0

# =================================
# DATABASE CONFIGURATION
# =================================
# Primary database
DATABASE_URL=postgres://postgres:postgres@localhost:5432/naga
DB_HOST=localhost
DB_PORT=5432
DB_NAME=naga
DB_USER=postgres
DB_PASSWORD=postgres

# Migration database (for legacy data)
MIGRATION_DATABASE_URL=postgres://postgres:postgres@localhost:5432/naga_migration
MIGRATION_DB_HOST=localhost
MIGRATION_DB_PORT=5432
MIGRATION_DB_NAME=naga_migration
MIGRATION_DB_USER=postgres
MIGRATION_DB_PASSWORD=postgres

# Test database
TEST_DATABASE_URL=sqlite:///test_naga.db

# =================================
# CACHE CONFIGURATION
# =================================
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Cache backends
CACHE_BACKEND=redis
SESSION_CACHE_ALIAS=default

# =================================
# EMAIL CONFIGURATION
# =================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=true
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=naga@pucsr.edu.kh

# =================================
# AUTHENTICATION & SECURITY
# =================================
# Keycloak configuration
KEYCLOAK_SERVER_URL=http://localhost:8080/auth
KEYCLOAK_REALM=naga
KEYCLOAK_CLIENT_ID=naga-backend
KEYCLOAK_CLIENT_SECRET=your-client-secret

# JWT configuration
JWT_SECRET_KEY=your-jwt-secret
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_LIFETIME=3600
JWT_REFRESH_TOKEN_LIFETIME=86400

# Session configuration
SESSION_COOKIE_SECURE=false
CSRF_COOKIE_SECURE=false
SECURE_SSL_REDIRECT=false

# =================================
# STORAGE CONFIGURATION
# =================================
# File storage
MEDIA_URL=/media/
MEDIA_ROOT=media
STATIC_URL=/static/
STATIC_ROOT=staticfiles

# AWS S3 (for production)
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_STORAGE_BUCKET_NAME=naga-sis-storage
AWS_S3_REGION_NAME=us-east-1
AWS_S3_CUSTOM_DOMAIN=cdn.naga.pucsr.edu.kh

# =================================
# MONITORING & OBSERVABILITY
# =================================
# Sentry error tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_PROFILES_SAMPLE_RATE=1.0

# Prometheus metrics
PROMETHEUS_METRICS_ENABLED=true
PROMETHEUS_METRICS_PATH=/metrics

# Logging configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/naga/app.log

# =================================
# EXTERNAL SERVICES
# =================================
# QuickBooks integration
QUICKBOOKS_CLIENT_ID=your-quickbooks-client-id
QUICKBOOKS_CLIENT_SECRET=your-quickbooks-client-secret
QUICKBOOKS_SANDBOX=true
QUICKBOOKS_REDIRECT_URI=http://localhost:8000/auth/quickbooks/callback

# SMS service (for notifications)
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=your-twilio-sid
TWILIO_AUTH_TOKEN=your-twilio-token
TWILIO_PHONE_NUMBER=+1234567890

# =================================
# FRONTEND CONFIGURATION
# =================================
# Vite environment variables (for frontend build)
VITE_API_BASE_URL=http://localhost:8000
VITE_ENVIRONMENT=development
VITE_KEYCLOAK_URL=http://localhost:8080/auth
VITE_KEYCLOAK_REALM=naga
VITE_KEYCLOAK_CLIENT_ID=naga-frontend

# PWA configuration
VITE_APP_NAME=Naga SIS
VITE_APP_SHORT_NAME=Naga
VITE_APP_DESCRIPTION=Student Information System for PUCSR

# =================================
# CI/CD CONFIGURATION
# =================================
# Docker registry
DOCKER_REGISTRY=ghcr.io
DOCKER_USERNAME=your-github-username
DOCKER_PASSWORD=your-github-token

# GitHub Actions
GITHUB_TOKEN=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
GITHUB_REPOSITORY=starkjeffrey/naga-monorepo

# =================================
# NOTIFICATION SERVICES
# =================================
# Slack integration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#naga-alerts
SLACK_USERNAME=Naga Bot

# Email notifications
NOTIFICATION_EMAIL_ENABLED=true
ADMIN_EMAIL=admin@pucsr.edu.kh
ALERTS_EMAIL=alerts@pucsr.edu.kh

# =================================
# ACADEMIC CONFIGURATION
# =================================
# School information
SCHOOL_NAME=Pannasastra University of Cambodia, Siem Reap Campus
SCHOOL_SHORT_NAME=PUCSR
SCHOOL_CODE=PUCSR
SCHOOL_TIMEZONE=Asia/Phnom_Penh

# Academic year configuration
CURRENT_ACADEMIC_YEAR=2024-2025
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,km

# Grading configuration
DEFAULT_GRADING_SCALE=4.0
PASSING_GRADE=D
GPA_PRECISION=2

# =================================
# BUSINESS RULES
# =================================
# Enrollment configuration
ENROLLMENT_DEADLINE_DAYS=7
LATE_ENROLLMENT_FEE=50.00
MAX_COURSE_LOAD=18
MIN_COURSE_LOAD=12

# Financial configuration
DEFAULT_CURRENCY=USD
LATE_PAYMENT_FEE_PERCENTAGE=5.0
SCHOLARSHIP_MAX_PERCENTAGE=100.0

# Attendance configuration
ATTENDANCE_GRACE_PERIOD_MINUTES=15
MAX_ABSENCES_PERCENTAGE=25.0
ATTENDANCE_CODE_EXPIRY_MINUTES=30

# =================================
# PERFORMANCE CONFIGURATION
# =================================
# Database connection pooling
DB_CONN_MAX_AGE=3600
DB_CONN_HEALTH_CHECKS=true

# Cache timeout settings
CACHE_TIMEOUT_SHORT=300
CACHE_TIMEOUT_MEDIUM=3600
CACHE_TIMEOUT_LONG=86400

# File upload limits
MAX_UPLOAD_SIZE=10485760  # 10MB
ALLOWED_UPLOAD_EXTENSIONS=pdf,doc,docx,jpg,jpeg,png

# =================================
# DEVELOPMENT TOOLS
# =================================
# Django Debug Toolbar
DEBUG_TOOLBAR_ENABLED=true
INTERNAL_IPS=127.0.0.1,localhost

# Development server
DEV_SERVER_HOST=0.0.0.0
DEV_SERVER_PORT=8000
FRONTEND_DEV_PORT=3000

# Testing configuration
TEST_RUNNER=pytest
TEST_PARALLEL=true
TEST_COVERAGE_ENABLED=true

# =================================
# PRODUCTION OVERRIDES
# =================================
# Only set these in production environment

# Security settings (production only)
# SECURE_SSL_REDIRECT=true
# SESSION_COOKIE_SECURE=true
# CSRF_COOKIE_SECURE=true
# SECURE_HSTS_SECONDS=31536000
# SECURE_HSTS_INCLUDE_SUBDOMAINS=true

# Performance settings (production only)
# GUNICORN_WORKERS=4
# GUNICORN_WORKER_CLASS=uvicorn.workers.UvicornWorker
# GUNICORN_MAX_REQUESTS=1000
# GUNICORN_TIMEOUT=30

# Monitoring (production only)
# NEW_RELIC_LICENSE_KEY=your-newrelic-key
# DATADOG_API_KEY=your-datadog-key
