{% load i18n %}

{% if students %}
    <div class="space-y-2">
        {% for student in students %}
            <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"
                 onclick="selectStudent({{ student.id }}, '{{ student.person.full_name|escapejs }}')">
                <div class="flex-1">
                    <div class="flex items-center space-x-3">
                        {% if student.person.photo %}
                            <img src="{{ student.person.photo.url }}" 
                                 alt="{{ student.person.full_name }}"
                                 class="w-10 h-10 rounded-full object-cover">
                        {% else %}
                            <div class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-gray-600"></i>
                            </div>
                        {% endif %}
                        
                        <div>
                            <p class="font-medium text-gray-900">{{ student.person.full_name }}</p>
                            <p class="text-sm text-gray-600">
                                {% trans "ID" %}: {{ student.student_id }}
                                {% if student.person.phone %}
                                    | {{ student.person.phone }}
                                {% endif %}
                            </p>
                            {% if student.person.khmer_name %}
                                <p class="text-sm text-gray-500">{{ student.person.khmer_name }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
                
                <div class="text-right">
                    {% if student.outstanding_balance and student.outstanding_balance > 0 %}
                        <div class="sis-badge sis-badge-warning">
                            ${{ student.outstanding_balance|floatformat:2 }}
                        </div>
                        <p class="text-xs text-orange-600 mt-1">{% trans "Outstanding" %}</p>
                    {% else %}
                        <div class="sis-badge sis-badge-success">
                            {% trans "Paid Up" %}
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="text-center text-gray-500 py-8">
        <i class="fas fa-user-times text-2xl mb-2"></i>
        <p>{% trans "No students found matching" %} "{{ query }}"</p>
    </div>
{% endif %}